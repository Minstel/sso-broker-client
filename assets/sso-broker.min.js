var SSOBroker=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,a=[],f=!1,h=-1;function l(){f&&c&&(f=!1,c.length?a=c.concat(a):h=-1,a.length&&p())}function p(){if(!f){var t=u(l);f=!0;for(var e=a.length;e;){for(c=a,a=[];++h<e;)c&&c[h].run();h=-1,e=a.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new d(t,e)),1!==a.length||f||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},c=function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e,n=r.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||r.call(t,e)},a=function(t,e){i&&"__proto__"===e.name?i(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},f=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,n,r,o,i,s,h=arguments[0],l=1,p=arguments.length,d=!1;for("boolean"==typeof h&&(d=h,h=arguments[1]||{},l=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});l<p;++l)if(null!=(e=arguments[l]))for(n in e)r=f(h,n),h!==(o=f(e,n))&&(d&&o&&(c(o)||(i=u(o)))?(i?(i=!1,s=r&&u(r)?r:[]):s=r&&c(r)?r:{},a(h,{name:n,newValue:t(d,s,o)})):void 0!==o&&a(h,{name:n,newValue:o}));return h}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";const r=n(21),o=n(22);function i(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function s(t,e){return e.decode?o(t):t}function u(t){const e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function c(t,e){const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=Object.assign({decode:!0,arrayFormat:"none"},e)),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const o of t.split("&")){let[t,i]=o.replace(/\+/g," ").split("=");i=void 0===i?null:s(i,e),n(s(t,e),i,r)}return Object.keys(r).sort().reduce((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(n):t[e]=n,t},Object.create(null))}e.extract=u,e.parse=c,e.stringify=((t,e)=>{if(!t)return"";const n=function(t){switch(t.arrayFormat){case"index":return(e,n,r)=>null===n?[i(e,t),"[",r,"]"].join(""):[i(e,t),"[",i(r,t),"]=",i(n,t)].join("");case"bracket":return(e,n)=>null===n?[i(e,t),"[]"].join(""):[i(e,t),"[]=",i(n,t)].join("");default:return(e,n)=>null===n?i(e,t):[i(e,t),"=",i(n,t)].join("")}}(e=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},e)),r=Object.keys(t);return!1!==e.sort&&r.sort(e.sort),r.map(r=>{const o=t[r];if(void 0===o)return"";if(null===o)return i(r,e);if(Array.isArray(o)){const t=[];for(const e of o.slice())void 0!==e&&t.push(n(r,e,t.length));return t.join("&")}return i(r,e)+"="+i(o,e)}).filter(t=>t.length>0).join("&")}),e.parseUrl=((t,e)=>{const n=t.indexOf("#");return-1!==n&&(t=t.slice(0,n)),{url:t.split("?")[0]||"",query:c(u(t),e)}})},function(t,e,n){"use strict";const r=n(6),o=n(7),i=n(8),s=n(15),u=n(16),c=n(17),a=n(20);t.exports=function(t,e,n,f,h,l){const p=this;this.window=t,this.url=e,this.brokerId=n,this.secret=f,this.cookieLifetime=h?1e3*h:36e5,this.cookieName=null,this.token=null,this.userInfo=null,this.logger=new r(l),this.init=function(){if(!this.window)throw"Window object is not specified";if(!this.brokerId)throw"SSO broker id not specified";if(!this.secret)throw"SSO broker secret not specified";if(!this.url)throw"SSO server URL not specified";"/"===this.url.substr(0,1)&&(this.url=this.window.location.hostname+this.url),this.useTrait(new u),this.useTrait(new i),this.useTrait(new c),this.useTrait(new s),this.useTrait(new a),this.useTrait(new o),this.log("Debug mode enabled"),this.cookieName=this.createCookieName(),this.token=this.getCookie(this.cookieName)},this.useTrait=function(t){for(var e in t)this[e]=t[e]},this.getUserInfo=function(){return this.userInfo?new Promise((t,e)=>{t(p.userInfo)}):this.sendGETRequest(this.url,{command:"userInfo"})},this.log=function(t){this.logger.log(t)},this.init()}},function(t,e,n){"use strict";t.exports=function(t){this.debug=!!t,this.log=function(t){this.debug&&console.log(t)}}},function(t,e,n){"use strict";t.exports=function(){this.login=function(t,e){this.log("-- Login");const n={command:"login",username:t,password:e};return this.sendPOSTRequest(this.url,n).then(t=>this.userInfo=t)},this.logout=function(){return this.log("-- Logout"),this.sendPOSTRequest(this.url,{command:"logout"})}}},function(t,e,n){"use strict";const r=n(9),o=n(12),i=n(13),s=n(14);t.exports=function(){this.createToken=function(){this.log("Create token");var t=new s(s.engines.mt19937().autoSeed());t=t.integer(1,100);const e=r(o(t)),n=i.converter(e).fromBase(16).toBase(32);return n},this.clearToken=function(){this.log("Clear token"),this.token=null,this.clearCookie()}}},function(t,e,n){!function(){var e=n(10),r=n(0).utf8,o=n(11),i=n(0).bin,s=function(t,n){t.constructor==String?t=n&&"binary"===n.encoding?i.stringToBytes(t):r.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var u=e.bytesToWords(t),c=8*t.length,a=1732584193,f=-271733879,h=-1732584194,l=271733878,p=0;p<u.length;p++)u[p]=16711935&(u[p]<<8|u[p]>>>24)|4278255360&(u[p]<<24|u[p]>>>8);u[c>>>5]|=128<<c%32,u[14+(c+64>>>9<<4)]=c;var d=s._ff,y=s._gg,g=s._hh,v=s._ii;for(p=0;p<u.length;p+=16){var m=a,S=f,b=h,w=l;f=v(f=v(f=v(f=v(f=g(f=g(f=g(f=g(f=y(f=y(f=y(f=y(f=d(f=d(f=d(f=d(f,h=d(h,l=d(l,a=d(a,f,h,l,u[p+0],7,-680876936),f,h,u[p+1],12,-389564586),a,f,u[p+2],17,606105819),l,a,u[p+3],22,-1044525330),h=d(h,l=d(l,a=d(a,f,h,l,u[p+4],7,-176418897),f,h,u[p+5],12,1200080426),a,f,u[p+6],17,-1473231341),l,a,u[p+7],22,-45705983),h=d(h,l=d(l,a=d(a,f,h,l,u[p+8],7,1770035416),f,h,u[p+9],12,-1958414417),a,f,u[p+10],17,-42063),l,a,u[p+11],22,-1990404162),h=d(h,l=d(l,a=d(a,f,h,l,u[p+12],7,1804603682),f,h,u[p+13],12,-40341101),a,f,u[p+14],17,-1502002290),l,a,u[p+15],22,1236535329),h=y(h,l=y(l,a=y(a,f,h,l,u[p+1],5,-165796510),f,h,u[p+6],9,-1069501632),a,f,u[p+11],14,643717713),l,a,u[p+0],20,-373897302),h=y(h,l=y(l,a=y(a,f,h,l,u[p+5],5,-701558691),f,h,u[p+10],9,38016083),a,f,u[p+15],14,-660478335),l,a,u[p+4],20,-405537848),h=y(h,l=y(l,a=y(a,f,h,l,u[p+9],5,568446438),f,h,u[p+14],9,-1019803690),a,f,u[p+3],14,-187363961),l,a,u[p+8],20,1163531501),h=y(h,l=y(l,a=y(a,f,h,l,u[p+13],5,-1444681467),f,h,u[p+2],9,-51403784),a,f,u[p+7],14,1735328473),l,a,u[p+12],20,-1926607734),h=g(h,l=g(l,a=g(a,f,h,l,u[p+5],4,-378558),f,h,u[p+8],11,-2022574463),a,f,u[p+11],16,1839030562),l,a,u[p+14],23,-35309556),h=g(h,l=g(l,a=g(a,f,h,l,u[p+1],4,-1530992060),f,h,u[p+4],11,1272893353),a,f,u[p+7],16,-155497632),l,a,u[p+10],23,-1094730640),h=g(h,l=g(l,a=g(a,f,h,l,u[p+13],4,681279174),f,h,u[p+0],11,-358537222),a,f,u[p+3],16,-722521979),l,a,u[p+6],23,76029189),h=g(h,l=g(l,a=g(a,f,h,l,u[p+9],4,-640364487),f,h,u[p+12],11,-421815835),a,f,u[p+15],16,530742520),l,a,u[p+2],23,-995338651),h=v(h,l=v(l,a=v(a,f,h,l,u[p+0],6,-198630844),f,h,u[p+7],10,1126891415),a,f,u[p+14],15,-1416354905),l,a,u[p+5],21,-57434055),h=v(h,l=v(l,a=v(a,f,h,l,u[p+12],6,1700485571),f,h,u[p+3],10,-1894986606),a,f,u[p+10],15,-1051523),l,a,u[p+1],21,-2054922799),h=v(h,l=v(l,a=v(a,f,h,l,u[p+8],6,1873313359),f,h,u[p+15],10,-30611744),a,f,u[p+6],15,-1560198380),l,a,u[p+13],21,1309151649),h=v(h,l=v(l,a=v(a,f,h,l,u[p+4],6,-145523070),f,h,u[p+11],10,-1120210379),a,f,u[p+2],15,718787259),l,a,u[p+9],21,-343485551),a=a+m>>>0,f=f+S>>>0,h=h+b>>>0,l=l+w>>>0}return e.endian([a,f,h,l])};s._ff=function(t,e,n,r,o,i,s){var u=t+(e&n|~e&r)+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._gg=function(t,e,n,r,o,i,s){var u=t+(e&r|n&~r)+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._hh=function(t,e,n,r,o,i,s){var u=t+(e^n^r)+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._ii=function(t,e,n,r,o,i,s){var u=t+(n^(e|~r))+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(s(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}};t.exports=n}()},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){(function(e){var n=e&&e.pid?e.pid.toString(36):"";function r(){var t=Date.now(),e=r.last||t;return r.last=t>e?t:e+1}t.exports=t.exports.default=function(t){return(t||"")+""+n+r().toString(36)},t.exports.process=function(t){return(t||"")+n+r().toString(36)},t.exports.time=function(t){return(t||"")+r().toString(36)}}).call(this,n(1))},function(t,e){var n={converter:function(t){return this.fromBase=function(e){return this.toBase=function(n){return parseInt(t,e).toString(n)},this},this},dec2hex:function(t){return this.converter(t).fromBase(10).toBase(16)},hex2dec:function(t){return this.converter(t).fromBase(16).toBase(10)},bin2dec:function(t){return this.converter(t).fromBase(2).toBase(10)},dec2bin:function(t){return this.converter(t).fromBase(10).toBase(2)},bin2hex:function(t){return this.converter(t).fromBase(2).toBase(16)},hex2bin:function(t){return this.converter(t).fromBase(16).toBase(2)}};t.exports=n},function(t,e,n){var r;!function(o){"use strict";var i="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(t,e){var n=65535&t,r=65535&e;return n*r+((t>>>16&65535)*r+n*(e>>>16&65535)<<16>>>0)|0}:Math.imul,s="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(t,e){return t.repeat(e)}:function(t,e){for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n};function u(t){if(!(this instanceof u))return new u(t);if(null==t)t=u.engines.nativeMath;else if("function"!=typeof t)throw new TypeError("Expected engine to be a function, got "+typeof t);this.engine=t}var c=u.prototype;function a(t){return function(){return t}}function f(t,e){return 0===e?t:function(n){return t(n)+e}}function h(t){var e=+t;return e<0?Math.ceil(e):Math.floor(e)}function l(t,e){return t<0?Math.max(t+e,0):Math.min(t,e)}function p(){}u.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(t){function e(t){for(var e=0,n=0;(0|e)<227;e=e+1|0)n=2147483648&t[e]|2147483647&t[e+1|0],t[e]=t[e+397|0]^n>>>1^(1&n?2567483615:0);for(;(0|e)<623;e=e+1|0)n=2147483648&t[e]|2147483647&t[e+1|0],t[e]=t[e-227|0]^n>>>1^(1&n?2567483615:0);n=2147483648&t[623]|2147483647&t[0],t[623]=t[396]^n>>>1^(1&n?2567483615:0)}return function(){var n=new t(624),r=0,o=0;function s(){(0|r)>=624&&(e(n),r=0);var t=n[r];return r=r+1|0,o+=1,0|function(t){return t^=t>>>11,t^=t<<7&2636928640,(t^=t<<15&4022730752)^t>>>18}(t)}return s.getUseCount=function(){return o},s.discard=function(t){for(o+=t,(0|r)>=624&&(e(n),r=0);t-r>624;)t-=624-r,e(n),r=0;return r=r+t|0,s},s.seed=function(t){var e=0;n[0]=e=0|t;for(var u=1;u<624;u=u+1|0)n[u]=e=i(e^e>>>30,1812433253)+u|0;return r=624,o=0,s},s.seedWithArray=function(t){return s.seed(19650218),function(t,e){for(var n=1,r=0,o=e.length,s=0|Math.max(o,624),u=0|t[0];(0|s)>0;--s)t[n]=u=(t[n]^i(u^u>>>30,1664525))+(0|e[r])+(0|r)|0,++r,(0|(n=n+1|0))>623&&(t[0]=t[623],n=1),r>=o&&(r=0);for(s=623;(0|s)>0;--s)t[n]=u=(t[n]^i(u^u>>>30,1566083941))-n|0,(0|(n=n+1|0))>623&&(t[0]=t[623],n=1);t[0]=2147483648}(n,t),s},s.autoSeed=function(){return s.seedWithArray(u.generateEntropyArray())},s}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?function(){var t=null,e=128;return function(){return e>=128&&(null===t&&(t=new Int32Array(128)),crypto.getRandomValues(t),e=0),0|t[e++]}}():null},u.generateEntropyArray=function(){for(var t=[],e=u.engines.nativeMath,n=0;n<16;++n)t[n]=0|e();return t.push(0|(new Date).getTime()),t},u.int32=function(t){return 0|t()},c.int32=function(){return u.int32(this.engine)},u.uint32=function(t){return t()>>>0},c.uint32=function(){return u.uint32(this.engine)},u.uint53=function(t){return 4294967296*(2097151&t())+(t()>>>0)},c.uint53=function(){return u.uint53(this.engine)},u.uint53Full=function(t){for(;;){var e=0|t();if(!(2097152&e))return 4294967296*(2097151&e)+(t()>>>0);if(2097152==(4194303&e)&&0==(0|t()))return 9007199254740992}},c.uint53Full=function(){return u.uint53Full(this.engine)},u.int53=function(t){var e=0|t();return 4294967296*(2097151&e)+(t()>>>0)+(2097152&e?-9007199254740992:0)},c.int53=function(){return u.int53(this.engine)},u.int53Full=function(t){for(;;){var e=0|t();if(!(4194304&e))return 4294967296*(2097151&e)+(t()>>>0)+(2097152&e?-9007199254740992:0);if(4194304==(8388607&e)&&0==(0|t()))return 9007199254740992}},c.int53Full=function(){return u.int53Full(this.engine)},u.integer=function(){function t(t){return 0==(t+1&t)}function e(e){return t(e)?function(t){return function(e){return e()&t}}(e):function(t){var e=t+1,n=e*Math.floor(4294967296/e);return function(t){var r=0;do{r=t()>>>0}while(r>=n);return r%e}}(e)}function n(e){var n=e+1;if(function(t){return 0==(0|t)}(n)){var r=(n/4294967296|0)-1;if(t(r))return function(t){return function(e){return 4294967296*(e()&t)+(e()>>>0)}}(r)}return function(t){var e=t*Math.floor(9007199254740992/t);return function(n){var r=0;do{r=4294967296*(2097151&n())+(n()>>>0)}while(r>=e);return r%t}}(n)}function r(t,e){return function(n){var r=0;do{var o=0|n();r=4294967296*(2097151&o)+(n()>>>0)+(2097152&o?-9007199254740992:0)}while(r<t||r>e);return r}}return function(t,o){if(t=Math.floor(t),o=Math.floor(o),t<-9007199254740992||!isFinite(t))throw new RangeError("Expected min to be at least -9007199254740992");if(o>9007199254740992||!isFinite(o))throw new RangeError("Expected max to be at most 9007199254740992");var i=o-t;return i<=0||!isFinite(i)?a(t):4294967295===i?0===t?u.uint32:f(u.int32,t+2147483648):i<4294967295?f(e(i),t):9007199254740991===i?f(u.uint53,t):i<9007199254740991?f(n(i),t):o-1-t==9007199254740991?f(u.uint53Full,t):-9007199254740992===t&&9007199254740992===o?u.int53Full:-9007199254740992===t&&9007199254740991===o?u.int53:-9007199254740991===t&&9007199254740992===o?f(u.int53,1):9007199254740992===o?f(r(t-1,o-1),1):r(t,o)}}(),c.integer=function(t,e){return u.integer(t,e)(this.engine)},u.realZeroToOneInclusive=function(t){return u.uint53Full(t)/9007199254740992},c.realZeroToOneInclusive=function(){return u.realZeroToOneInclusive(this.engine)},u.realZeroToOneExclusive=function(t){return u.uint53(t)/9007199254740992},c.realZeroToOneExclusive=function(){return u.realZeroToOneExclusive(this.engine)},u.real=function(){return function(t,e,n){if(!isFinite(t))throw new RangeError("Expected left to be a finite number");if(!isFinite(e))throw new RangeError("Expected right to be a finite number");return f(function(t,e){return 1===e?t:0===e?function(){return 0}:function(n){return t(n)*e}}(n?u.realZeroToOneInclusive:u.realZeroToOneExclusive,e-t),t)}}(),c.real=function(t,e,n){return u.real(t,e,n)(this.engine)},u.bool=function(){function t(t){return 1==(1&t())}function e(t,e){return function(n){return t(n)<e}}return function(n,r){return null==r?null==n?t:function(t){if(t<=0)return a(!1);if(t>=1)return a(!0);var n=4294967296*t;return n%1==0?e(u.int32,n-2147483648|0):e(u.uint53,Math.round(9007199254740992*t))}(n):n<=0?a(!1):n>=r?a(!0):e(u.integer(0,r-1),n)}}(),c.bool=function(t,e){return u.bool(t,e)(this.engine)},u.pick=function(t,e,n,r){var o=e.length,i=null==n?0:l(h(n),o),s=void 0===r?o:l(h(r),o);if(!(i>=s))return e[u.integer(i,s-1)(t)]},c.pick=function(t,e,n){return u.pick(this.engine,t,e,n)};var d=Array.prototype.slice;u.picker=function(t,e,n){var r=d.call(t,e,n);if(!r.length)return p;var o=u.integer(0,r.length-1);return function(t){return r[o(t)]}},u.shuffle=function(t,e,n){var r=e.length;if(r){null==n&&(n=0);for(var o=r-1>>>0;o>n;--o){var i=u.integer(0,o)(t);if(o!==i){var s=e[o];e[o]=e[i],e[i]=s}}}return e},c.shuffle=function(t){return u.shuffle(this.engine,t)},u.sample=function(t,e,n){if(n<0||n>e.length||!isFinite(n))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===n)return[];var r=d.call(e),o=r.length;if(o===n)return u.shuffle(t,r,0);var i=o-n;return u.shuffle(t,r,i-1).slice(i)},c.sample=function(t,e){return u.sample(this.engine,t,e)},u.die=function(t){return u.integer(1,t)},c.die=function(t){return u.die(t)(this.engine)},u.dice=function(t,e){var n=u.die(t);return function(t){var r=[];r.length=e;for(var o=0;o<e;++o)r[o]=n(t);return r}},c.dice=function(t,e){return u.dice(t,e)(this.engine)},u.uuid4=function(){function t(t,e){return s("0",e-t.length)+t}return function(e){var n=e()>>>0,r=0|e(),o=0|e(),i=e()>>>0;return t(n.toString(16),8)+"-"+t((65535&r).toString(16),4)+"-"+t((r>>4&4095|16384).toString(16),4)+"-"+t((16383&o|32768).toString(16),4)+"-"+t((o>>4&65535).toString(16),4)+t(i.toString(16),8)}}(),c.uuid4=function(){return u.uuid4(this.engine)},u.string=function(t){null==t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var e=t.length;if(!e)throw new Error("Expected pool not to be an empty string");var n=u.integer(0,e-1);return function(e,r){for(var o="",i=0;i<r;++i){var s=n(e);o+=t.charAt(s)}return o}},c.string=function(t,e){return u.string(e)(this.engine,t)},u.hex=function(){var t=u.string("0123456789abcdef"),e=u.string("0123456789abcdef".toUpperCase());return function(n){return n?e:t}}(),c.hex=function(t,e){return u.hex(e)(this.engine,t)},u.date=function(t,e){if(!(t instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof t);if(!(e instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof e);var n=u.integer(t.getTime(),e.getTime());return function(t){return new Date(n(t))}},c.date=function(t,e){return u.date(t,e)(this.engine)},void 0===(r=function(){return u}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){"use strict";const r=n(2);t.exports=function(){this.isAttached=function(){return!!this.token},this.attach=function(t){if(this.isAttached())return this.log("-- Already attached"),new Promise((t,e)=>t(null));this.log("-- Attach"),this.token=this.createToken(),this.setCookie(this.token),void 0===t&&(t={}),r(t,{command:"attach",broker:this.brokerId,token:this.token,checksum:this.createChecksum("attach")});const e=this;return this.sendGETRequest(this.url,t).catch(t=>{throw e.log("!- Cleanup on error"),e.clearToken(),t})}}},function(t,e,n){"use strict";t.exports=function(){this.createCookieName=function(){return"sso_token_"+this.brokerId.toLowerCase().replace(/[_\W]+/g,"_")},this.getCookie=function(t){this.log("Get cookie "+t),t=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(t);const e=";"+this.window.document.cookie,n=new RegExp(";\\s*"+t+"="),r=e.split(n);var o=null;if(r.length>1){const t=(o=r[1]).indexOf(";");-1!==t&&(o=o.substring(0,t))}return this.log("Obtained cookie: "+o),o},this.setCookie=function(t){const e=(new Date).getTime(),n=new Date;n.setTime(e+this.cookieLifetime);const r=this.cookieName+"="+t+";path=/;expires="+n.toUTCString();this.log("Set cookie: "+r),this.window.document.cookie=r},this.clearCookie=function(){const t=(new Date).getTime(),e=new Date;e.setTime(t-1e3);const n=this.cookieName+"=;path=/;expires="+e.toUTCString();this.log("Clear cookie: "+n),this.window.document.cookie=n}}},function(t,e,n){"use strict";const r=n(18).sha256;t.exports=function(){this.createSessionId=function(){if(!this.token)return null;this.log("Create session id");const t=this.createChecksum("session");return`SSO-${this.brokerId}-${this.token}-${t}`},this.createChecksum=function(t){return this.token?(this.log("Create checksum for prefix "+t),r(t+this.token+this.secret)):null}}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(19),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(n){return new Sha256(e,!0).update(n)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(t){return e.create().update(t)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];e[r]=createOutputMethod(r,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if("string"==typeof t)return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(null===t||void 0===t)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(n,r){return new HmacSha256(n,e,!0).update(r)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(e){return new HmacSha256(e,t)},e.update=function(t,n){return e.create(t).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];e[r]=createHmacOutputMethod(r,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function HmacSha256(t,e,n){var r,o=typeof t;if("string"===o){var i,s=[],u=t.length,c=0;for(r=0;r<u;++r)(i=t.charCodeAt(r))<128?s[c++]=i:i<2048?(s[c++]=192|i>>6,s[c++]=128|63&i):i<55296||i>=57344?(s[c++]=224|i>>12,s[c++]=128|i>>6&63,s[c++]=128|63&i):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++r)),s[c++]=240|i>>18,s[c++]=128|i>>12&63,s[c++]=128|i>>6&63,s[c++]=128|63&i);t=s}else{if("object"!==o)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR)}t.length>64&&(t=new Sha256(e,!0).update(t).array());var a=[],f=[];for(r=0;r<64;++r){var h=t[r]||0;a[r]=92^h,f[r]=54^h}Sha256.call(this,e,n),this.update(f),this.oKeyPad=a,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR);e=!0}for(var r,o,i=0,s=t.length,u=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),e)for(o=this.start;i<s&&o<64;++i)u[o>>2]|=t[i]<<SHIFT[3&o++];else for(o=this.start;i<s&&o<64;++i)(r=t.charCodeAt(i))<128?u[o>>2]|=r<<SHIFT[3&o++]:r<2048?(u[o>>2]|=(192|r>>6)<<SHIFT[3&o++],u[o>>2]|=(128|63&r)<<SHIFT[3&o++]):r<55296||r>=57344?(u[o>>2]|=(224|r>>12)<<SHIFT[3&o++],u[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],u[o>>2]|=(128|63&r)<<SHIFT[3&o++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++i)),u[o>>2]|=(240|r>>18)<<SHIFT[3&o++],u[o>>2]|=(128|r>>12&63)<<SHIFT[3&o++],u[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++],u[o>>2]|=(128|63&r)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=u[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t,e,n,r,o,i,s,u,c,a=this.h0,f=this.h1,h=this.h2,l=this.h3,p=this.h4,d=this.h5,y=this.h6,g=this.h7,v=this.blocks;for(t=16;t<64;++t)e=((o=v[t-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,n=((o=v[t-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,v[t]=v[t-16]+e+v[t-7]+n<<0;for(c=f&h,t=0;t<64;t+=4)this.first?(this.is224?(i=300032,g=(o=v[0]-1413257819)-150054599<<0,l=o+24177077<<0):(i=704751109,g=(o=v[0]-210244248)-1521486534<<0,l=o+143694565<<0),this.first=!1):(e=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),r=(i=a&f)^a&h^c,g=l+(o=g+(n=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&d^~p&y)+K[t]+v[t])<<0,l=o+(e+r)<<0),e=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),r=(s=l&a)^l&f^i,y=h+(o=y+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&p^~g&d)+K[t+1]+v[t+1])<<0,e=((h=o+(e+r)<<0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),r=(u=h&l)^h&a^s,d=f+(o=d+(n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&g^~y&p)+K[t+2]+v[t+2])<<0,e=((f=o+(e+r)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),r=(c=f&h)^f&l^u,p=a+(o=p+(n=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&y^~d&g)+K[t+3]+v[t+3])<<0,a=o+(e+r)<<0;this.h0=this.h0+a<<0,this.h1=this.h1+f<<0,this.h2=this.h2+h<<0,this.h3=this.h3+l<<0,this.h4=this.h4+p<<0,this.h5=this.h5+d<<0,this.h6=this.h6+y<<0,this.h7=this.h7+g<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,s=this.h6,u=this.h7,c=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s];return this.is224||(c+=HEX_CHARS[u>>28&15]+HEX_CHARS[u>>24&15]+HEX_CHARS[u>>20&15]+HEX_CHARS[u>>16&15]+HEX_CHARS[u>>12&15]+HEX_CHARS[u>>8&15]+HEX_CHARS[u>>4&15]+HEX_CHARS[15&u]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,s=this.h6,u=this.h7,c=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s];return this.is224||c.push(u>>24&255,u>>16&255,u>>8&255,255&u),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(1),__webpack_require__(3))},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";const r=n(2),o=n(4),i=n(23);t.exports=function(){this.sendGETRequest=function(t,e){this.log("Send GET request");const n=new i(this.logger);return t=t+"?"+o.stringify(e),this.sendRequest(n,{method:"GET",url:t})},this.sendPOSTRequest=function(t,e){this.log("Send POST request");const n=new i(this.logger);return void 0!==e.command&&(t=t+"?"+o.stringify({command:e.command}),delete e.command),this.sendRequest(n,{method:"POST",url:t,form:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},this.sendRequest=function(t,e){const n=this;return new Promise((o,i)=>{r(!0,e,{headers:{Accept:"application/json",Authorization:"Bearer "+this.createSessionId()}}),t.process(e,(t,e,r)=>{if(e&&403==e.statusCode&&(this.clearToken(),i("Session was not attached to server session. "+t)),t&&i("Error while performing request: "+t),r){const t=void 0!==e.headers["content-type"]&&-1!==e.headers["content-type"].indexOf("application/json");t||i("Error while performing request: Expected application/json response, got "+e.headers["content-type"]),n.log("Obtained response body:"),n.log(r),r=JSON.parse(r)}o(r)})})}}},function(t,e,n){"use strict";t.exports=(t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],i(n),i(r))}function s(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=i(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=s(n[0]);r!==n[0]&&(e[n[0]]=r)}n=o.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),u=0;u<i.length;u++){var c=i[u];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},function(t,e,n){"use strict";const r=n(24),o=n(4);t.exports=function(t){this.process=function(e,n){this.normalizeOptions(e),e.withCredentials=!0,t.log("Perform request with options:"),t.log(e),r(e,n)},this.normalizeOptions=function(t){void 0!==t.form&&(t.body=o.stringify(t.form),delete t.form),t.url.match(/^[a-z]+:\/\//)||(t.url="http://"+t.url)}}},function(t,e,n){"use strict";var r=n(25),o=n(26),i=n(27),s=n(31);function u(t,e,n){var r=t;return o(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=s(e,{uri:t}),r.callback=n,r}function c(t,e,n){return a(e=u(t,e,n))}function a(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,r,o){e||(e=!0,t.callback(n,r,o))};function r(t){return clearTimeout(f),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,v)}function o(){if(!u){var e;clearTimeout(f),e=t.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var r=v,o=null;return 0!==e?(r={body:function(){var t=void 0;if(t=a.response?a.response:a.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(a),g)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:l,headers:{},url:h,rawRequest:a},a.getAllResponseHeaders&&(r.headers=i(a.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,r,r.body)}}var s,u,a=t.xhr||null;a||(a=t.cors||t.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var f,h=a.url=t.uri||t.url,l=a.method=t.method||"GET",p=t.body||t.data,d=a.headers=t.headers||{},y=!!t.sync,g=!1,v={body:void 0,headers:{},statusCode:0,method:l,url:h,rawRequest:a};if("json"in t&&!1!==t.json&&(g=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(o,0)},a.onload=o,a.onerror=r,a.onprogress=function(){},a.onabort=function(){u=!0},a.ontimeout=r,a.open(l,h,!y,t.username,t.password),y||(a.withCredentials=!!t.withCredentials),!y&&t.timeout>0&&(f=setTimeout(function(){if(!u){u=!0,a.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)}},t.timeout)),a.setRequestHeader)for(s in d)d.hasOwnProperty(s)&&a.setRequestHeader(s,d[s]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(a.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(a),a.send(p||null),a}t.exports=c,t.exports.default=c,c.XMLHttpRequest=r.XMLHttpRequest||function(){},c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:r.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){c["delete"===t?"del":t]=function(e,n,r){return(n=u(e,n,r)).method=t.toUpperCase(),a(n)}})},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,n(3))},function(t,e){t.exports=function(t){var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},function(t,e,n){var r=n(28),o=n(29);t.exports=function(t){if(!t)return{};var e={};return o(r(t).split("\n"),function(t){var n=t.indexOf(":"),o=r(t.slice(0,n)).toLowerCase(),i=r(t.slice(n+1));void 0===e[o]?e[o]=i:!function(t){return"[object Array]"===Object.prototype.toString.call(t)}(e[o])?e[o]=[e[o],i]:e[o].push(i)}),e}},function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){"use strict";var r=n(30),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=n),"[object Array]"===o.call(t)?function(t,e,n){for(var r=0,o=t.length;r<o;r++)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,s):"string"==typeof t?function(t,e,n){for(var r=0,o=t.length;r<o;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}(t,e,s):function(t,e,n){for(var r in t)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,s)}},function(t,e,n){"use strict";var r=Function.prototype.toString,o=/^\s*class\b/,i=function(t){try{var e=r.call(t);return o.test(e)}catch(t){return!1}},s=Object.prototype.toString,u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(u)return function(t){try{return!i(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(i(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t};var n=Object.prototype.hasOwnProperty}]);